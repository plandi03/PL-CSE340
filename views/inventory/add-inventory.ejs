<div class="add-inventory-container">
  <h1><%= title %></h1>
  
  <%- messages() %>
  
  <% if (errors) { %>
    <div class="error-messages">
      <% errors.array().forEach(function(error) { %>
        <p class="error"><%= error.msg %></p>
      <% }); %>
    </div>
  <% } %>

  <form action="/inventory/add-inventory" method="post" class="inventory-form">
    <div class="form-row">
      <div class="form-group">
        <label for="classification_id">Classification:</label>
        <%- classificationList %>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="inv_make">Make:</label>
        <input type="text" id="inv_make" name="inv_make" required 
               placeholder="e.g., Toyota, Ford, BMW"
               value="<%= typeof inv_make != 'undefined' ? inv_make : '' %>">
      </div>

      <div class="form-group">
        <label for="inv_model">Model:</label>
        <input type="text" id="inv_model" name="inv_model" required 
               placeholder="e.g., Camry, F-150, X5"
               value="<%= typeof inv_model != 'undefined' ? inv_model : '' %>">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="inv_year">Year:</label>
        <input type="number" id="inv_year" name="inv_year" required 
               min="1900" max="<%= new Date().getFullYear() + 1 %>"
               placeholder="e.g., 2024"
               value="<%= typeof inv_year != 'undefined' ? inv_year : '' %>">
      </div>

      <div class="form-group">
        <label for="inv_color">Color:</label>
        <input type="text" id="inv_color" name="inv_color" required 
               placeholder="e.g., Blue, Black, White"
               value="<%= typeof inv_color != 'undefined' ? inv_color : '' %>">
      </div>
    </div>

    <div class="form-group">
      <label for="inv_description">Description:</label>
      <textarea id="inv_description" name="inv_description" required 
                rows="4" placeholder="Enter vehicle description..."><%= typeof inv_description != 'undefined' ? inv_description : '' %></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="inv_price">Price:</label>
        <input type="number" id="inv_price" name="inv_price" required 
               min="0" step="0.01"
               placeholder="e.g., 25000"
               value="<%= typeof inv_price != 'undefined' ? inv_price : '' %>">
      </div>

      <div class="form-group">
        <label for="inv_miles">Mileage:</label>
        <input type="number" id="inv_miles" name="inv_miles" required 
               min="0"
               placeholder="e.g., 35000"
               value="<%= typeof inv_miles != 'undefined' ? inv_miles : '' %>">
      </div>
    </div>

    <div class="form-group">
      <label for="inv_image">Image Path:</label>
      <input type="text" id="inv_image" name="inv_image" required 
             placeholder="/images/vehicles/no-image.jpg"
             value="<%= typeof inv_image != 'undefined' ? inv_image : '/images/vehicles/no-image.jpg' %>">
      <span class="input-help">Use: /images/vehicles/no-image.jpg for placeholder</span>
    </div>

    <div class="form-group">
      <label for="inv_thumbnail">Thumbnail Path:</label>
      <input type="text" id="inv_thumbnail" name="inv_thumbnail" required 
             placeholder="/images/vehicles/no-image-tn.jpg"
             value="<%= typeof inv_thumbnail != 'undefined' ? inv_thumbnail : '/images/vehicles/no-image-tn.jpg' %>">
      <span class="input-help">Use: /images/vehicles/no-image-tn.jpg for placeholder</span>
    </div>

    <div class="form-group">
      <button type="submit" class="btn btn-submit">Add Vehicle</button>
      <a href="/inventory" class="btn btn-cancel">Cancel</a>
    </div>
  </form>
</div>

<script>
// Client-side validation for add inventory form
document.addEventListener('DOMContentLoaded', function() {
  const form = document.querySelector('.inventory-form');
  
  if (form) {
    form.addEventListener('submit', function(e) {
      const year = document.getElementById('inv_year').value;
      const currentYear = new Date().getFullYear();
      
      if (year < 1900 || year > currentYear + 1) {
        e.preventDefault();
        alert('Please enter a valid year between 1900 and ' + (currentYear + 1));
        return false;
      }
      
      const price = document.getElementById('inv_price').value;
      if (price < 0) {
        e.preventDefault();
        alert('Price must be a positive number');
        return false;
      }
      
      const miles = document.getElementById('inv_miles').value;
      if (miles < 0) {
        e.preventDefault();
        alert('Mileage must be a positive number');
        return false;
      }
    });
  }
});
</script>